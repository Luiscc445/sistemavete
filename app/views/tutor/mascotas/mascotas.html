{% extends "dashboards/tutor_base.html" %}
{% block title %}Mis Mascotas{% endblock %}

<link rel="stylesheet" href="{{ url_for('static', filename='css/tutor/mascotas.css') }}">


{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/tutor/mascotas.css') }}">
{% endblock %}

{% block content %}
<div class="container pb-5">
    <!-- Header -->
    <!-- Header -->
    <div class="card-modern p-4 mb-5 animate-fade-up d-flex justify-content-between align-items-center">
        <div>
            <h2 class="fw-bold mb-1 text-primary">Mis Mascotas</h2>
            <p class="text-muted mb-0">Gestiona el perfil y salud de tus compañeros</p>
        </div>
        <a href="{{ url_for('tutor.nueva_mascota') }}" class="btn btn-primary rounded-pill px-4 shadow-sm fw-bold">
            <i class="bi bi-plus-lg me-2"></i>Nueva Mascota
        </a>
    </div>

    {% if mascotas %}
    <div class="row g-4">
        {% for mascota in mascotas %}
        <div class="col-xl-4 col-lg-4 col-md-6 animate-fade-up delay-100">
            <div class="card-modern h-100">
                <!-- Card Header with Photo -->
                <div class="position-relative text-center pt-4 pb-3 bg-soft-light">
                    <div class="position-relative d-inline-block">
                        {% if mascota.foto %}
                        <img src="data:image/jpeg;base64,{{ mascota.foto }}" alt="{{ mascota.nombre }}"
                            class="rounded-circle shadow-lg border border-4 border-white object-fit-cover"
                            style="width: 120px; height: 120px;">
                        {% else %}
                        <div class="rounded-circle shadow-lg border border-4 border-white d-flex align-items-center justify-content-center mx-auto"
                            style="width: 120px; height: 120px; background: linear-gradient(135deg, #e0e7ff 0%, #c7d2fe 100%);">
                            <i class="bi bi-{{ 'heart-fill' if mascota.especie == 'Perro' else 'star-fill' }} text-primary"
                                style="font-size: 3rem;"></i>
                        </div>
                        {% endif %}
                        <span
                            class="position-absolute bottom-0 end-0 badge rounded-pill bg-white text-dark shadow-sm border px-2 py-1">
                            {{ mascota.especie }}
                        </span>
                    </div>
                </div>

                <!-- Card Body -->
                <div class="card-body-modern text-center pt-0">
                    <h4 class="fw-bold mb-1">{{ mascota.nombre }}</h4>
                    <p class="text-muted small mb-3">{{ mascota.raza or 'Raza no especificada' }}</p>

                    <div class="d-flex justify-content-center gap-2 mb-4">
                        <span class="badge bg-soft-primary text-primary rounded-pill px-3">
                            {{ mascota.edad }} años
                        </span>
                        <span class="badge bg-soft-info text-info rounded-pill px-3">
                            {{ mascota.sexo }}
                        </span>
                        {% if mascota.peso %}
                        <span class="badge bg-soft-warning text-warning rounded-pill px-3">
                            {{ mascota.peso }} kg
                        </span>
                        {% endif %}
                    </div>

                    <div class="d-grid gap-2">
                        <a href="{{ url_for('tutor.ver_mascota', id=mascota.id) }}"
                            class="btn btn-outline-primary rounded-pill">
                            Ver Detalles
                        </a>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="text-center py-5 animate-fade-up">
        <div class="mb-4">
            <div class="bg-soft-primary rounded-circle d-inline-flex align-items-center justify-content-center"
                style="width: 100px; height: 100px;">
                <i class="bi bi-heart text-primary" style="font-size: 3rem;"></i>
            </div>
        </div>
        <h3 class="fw-bold">No tienes mascotas registradas</h3>
        <p class="text-muted mb-4">¡Agrega a tu primer compañero para comenzar!</p>
        <a href="{{ url_for('tutor.nueva_mascota') }}" class="btn btn-primary btn-lg rounded-pill px-5 shadow-sm">
            Registrar Mascota
        </a>
    </div>
    {% endif %}
</div>

{% endblock %}